(this["webpackJsonptypescript-login"]=this["webpackJsonptypescript-login"]||[]).push([[0],{46:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var c=n(3),o=n(2),a=n.n(o),i=n(19),s=n.n(i),r=(n(45),n(46),n(15)),l=n(24),d=n(25),u=n(27),j=n(17),b=n(39),v=n(20),O=n(13),h="USER_SET",f={user:void 0},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(O.a)(Object(O.a)({},e),{},{user:t.user});default:return Object(O.a)({},e)}},g=Object(v.c)({user:m}),p=[b.a],x=Object(v.d)(g,v.a.apply(void 0,p)),w=n(9),N="/",y="/dashboard",S="/settings",I=n(11),C=n(29),k=n(22),E=(n(52),function(e){var t=e.color;return Object(c.jsx)(k.a,{className:"loading ".concat(t),icon:j.e})}),P=(n(53),function(e){var t=e.children,n=e.className,o=e.color,a=void 0===o?"primary":o,i=e.disabled,s=e.icon,r=e.inverted,l=e.loading,d=e.loadingColor,u=void 0===d?"white":d,j=e.onClick,b=e.text,v=e.type;return Object(c.jsxs)("button",{className:"".concat(n?"".concat(n," "):"","custom-btn btn-").concat(a).concat(r?" btn-".concat(a,"-inverted"):""),disabled:i,onClick:j,type:v,children:[s&&Object(c.jsx)(k.a,{icon:s}),b,t,l&&Object(c.jsx)(E,{color:u})]})}),A=(n(54),function(e){var t=e.disabled,n=e.onChange,a=e.placeholder,i=e.type,s=e.value,r=Object(o.useState)(!1),l=Object(I.a)(r,2),d=l[0],u=l[1];return Object(c.jsxs)("div",{className:"input-container",children:[a&&Object(c.jsx)("p",{className:"input-placeholder",children:a}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{disabled:t,onChange:function(e){return n(e.target.value)},type:d&&"password"===i?"text":i,value:s}),"password"===i&&Object(c.jsx)("button",{className:"show-password-button",onClick:function(){return u(!d)},type:"button",children:Object(c.jsx)(k.a,{icon:d?j.c:j.b})})]})]})}),F=n(30);F.a.initializeApp({apiKey:"AIzaSyD4BuIF9c_6eyForOMjFmmsK4oxrDNRtzY",authDomain:"typescript-login-jgf.firebaseapp.com",databaseURL:"https://typescript-login-jgf.firebaseio.com",projectId:"typescript-login-jgf",storageBucket:"typescript-login-jgf.appspot.com",messagingSenderId:"1071686504136",appId:"1:1071686504136:web:8ba5ea43d76626933a1ffd",measurementId:"G-ELGWS26XCJ"}),F.a.analytics();var G=F.a,T=function(e,t){return new Promise((function(n,c){e&&t?G.auth().signInWithEmailAndPassword(e,t).then((function(e){var t,o,a,i;(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.uid)?(i=e.user.uid,G.firestore().collection("users").doc(i).get()).then((function(t){var o,a,i,s,r,l,d=t.data(),u=(null===d||void 0===d?void 0:d.name)||(null===(o=e.user)||void 0===o?void 0:o.displayName)||(null===(a=e.user)||void 0===a?void 0:a.email)||"",j=null===d||void 0===d||null===(i=d.settings)||void 0===i?void 0:i.id,b=null===d||void 0===d||null===(s=d.dashboard)||void 0===s?void 0:s.id;(null===d||void 0===d||null===(r=d.role)||void 0===r?void 0:r.id)?(l=d.role.id,new Promise((function(e,t){l?G.firestore().collection("roles").doc(l).get().then((function(t){var n=t.data();e(null===n||void 0===n?void 0:n.name)})).catch((function(e){t(e.message)})):t(new Error("id not sent"))}))).then((function(e){n({name:u,settingsId:j,dashboardId:b,role:e})})).catch((function(e){c(e.message)})):n({name:u,settingsId:j,dashboardId:b,role:"Admin"})})):n({name:(null===(o=e.user)||void 0===o?void 0:o.displayName)||(null===(a=e.user)||void 0===a?void 0:a.email)||"",role:"Admin"})})).catch((function(e){c(e.message)})):c(e?new Error("Wrong password"):new Error("Wrong email"))}))},W=(n(58),{className:"custom-toast",position:d.b.POSITION.TOP_RIGHT}),z=function(){var e=Object(o.useState)(!1),t=Object(I.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)({}),s=Object(I.a)(i,2),l=(s[0],s[1]),u=Object(o.useState)({email:"",password:""}),j=Object(I.a)(u,2),b=j[0],v=j[1],f=Object(r.c)(),m=function(e,t){v(Object(O.a)(Object(O.a)({},b),{},Object(C.a)({},e,t)))};return Object(c.jsxs)("form",{className:"login-form shadow",children:[Object(c.jsx)("h2",{children:"Sign in"}),Object(c.jsxs)("div",{className:"login-form-fields",children:[Object(c.jsx)(A,{disabled:n,onChange:function(e){return m("email",e)},placeholder:"Email",type:"text",value:null===b||void 0===b?void 0:b.email}),Object(c.jsx)(A,{disabled:n,onChange:function(e){return m("password",e)},placeholder:"Password",type:"password",value:null===b||void 0===b?void 0:b.password})]}),Object(c.jsx)(P,{disabled:n,loading:n,onClick:function(){var e=function(){var e,t={};return(null===b||void 0===b?void 0:b.email)&&(e=b.email,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))||(t.hasErrors=!0,t.email=!0),t}();l(e),e.hasErrors||(a(!0),T(b.email,b.password).then((function(e){var t;f({type:h,user:e}),t="Welcome ".concat(e.name),d.b.success(t,Object(O.a)(Object(O.a)({},W),{},{className:"".concat(W.className," toast-success")})),setTimeout((function(){return a(!1)}))})).catch((function(e){var t;t=e,d.b.error(t,Object(O.a)(Object(O.a)({},W),{},{className:"".concat(W.className," toast-error")})),a(!1)})))},text:"Sign in",type:"button"})]})},B=(n(59),function(){var e=Object(o.useState)(!1),t=Object(I.a)(e,2);t[0],t[1];return Object(c.jsx)("div",{className:"landing",children:Object(c.jsx)(z,{})})}),D=(n(60),function(e){var t=e.children,n=e.className,o=e.title;return Object(c.jsxs)("div",{className:"page",children:[!!o&&Object(c.jsx)("div",{className:"page-header",children:Object(c.jsx)("h2",{children:o})}),Object(c.jsx)("div",{className:"page-content".concat(n?" ".concat(n):""),children:t})]})}),R=function(){return Object(c.jsx)("img",{alt:"dashboard image",className:"dashboard-image",src:"https://cdn.now.howstuffworks.com/media-content/0b7f4e9b-f59c-4024-9f06-b3dc12850ab7-1920-1080.jpg"})},J=function(){return Object(c.jsx)("img",{alt:"dashboard graph",className:"dashboard-graph",src:"https://learnenglish.britishcouncil.org/sites/podcasts/files/Writing-B2-A-summary-of-a-line-graph.png"})},L=(n(61),function(){var e=Object(o.useState)(!1),t=Object(I.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)({}),s=Object(I.a)(i,2),l=s[0],d=s[1],u=Object(r.d)().getState,j=function(){var e,t=u().user.user;(null===t||void 0===t?void 0:t.dashboardId)&&(a(!0),(e=t.dashboardId,new Promise((function(t,n){e?G.firestore().collection("dashboard").doc(e).get().then((function(e){var n=e.data();t({showGraph:null===n||void 0===n?void 0:n.showGraph,showImage:null===n||void 0===n?void 0:n.showImage})})).catch((function(e){n(e.message)})):n(new Error("id not sent"))}))).then((function(e){d(e),a(!1)})).catch((function(){a(!1)})))};return Object(o.useEffect)((function(){j()}),[]),Object(c.jsx)(D,{title:"Dashboard",className:"dashboard-page",children:n?Object(c.jsx)(E,{color:"primary"}):Object(c.jsxs)(c.Fragment,{children:[!!(null===l||void 0===l?void 0:l.showImage)&&Object(c.jsx)(R,{}),!!(null===l||void 0===l?void 0:l.showGraph)&&Object(c.jsx)(J,{})]})})}),_=function(e){var t=e.value,n=e.label;return Object(c.jsxs)("div",{className:"setting-element",children:[n,": ",Object(c.jsx)("strong",{children:t})]})},H=(n(62),function(){var e=Object(o.useState)(!1),t=Object(I.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)({}),s=Object(I.a)(i,2),l=s[0],d=s[1],u=Object(r.d)().getState,j=function(){var e,t=u().user.user;(null===t||void 0===t?void 0:t.settingsId)&&(a(!0),(e=t.settingsId,new Promise((function(t,n){e?G.firestore().collection("settings").doc(e).get().then((function(e){var n=e.data();t({info:null===n||void 0===n?void 0:n.info,info2:null===n||void 0===n?void 0:n.info2,test:null===n||void 0===n?void 0:n.test,storage:null===n||void 0===n?void 0:n.storage})})).catch((function(e){n(e.message)})):n(new Error("id not sent"))}))).then((function(e){d(e),a(!1)})).catch((function(){a(!1)})))};return Object(o.useEffect)((function(){j()}),[]),Object(c.jsx)(D,{title:"Settings",className:"settings-page",children:n?Object(c.jsx)(E,{color:"primary"}):Object(c.jsxs)(c.Fragment,{children:[!!(null===l||void 0===l?void 0:l.info)&&Object(c.jsx)(_,{label:"info",value:l.info}),!!(null===l||void 0===l?void 0:l.info2)&&Object(c.jsx)(_,{label:"info2",value:l.info2}),!!(null===l||void 0===l?void 0:l.test)&&Object(c.jsx)(_,{label:"test",value:l.test}),!!(null===l||void 0===l?void 0:l.storage)&&Object(c.jsx)(_,{label:"storage",value:l.storage})]})})}),K=(n(63),function(e){var t=e.icon,n=e.onClick,o=e.title,a=e.to;return Object(c.jsxs)(l.b,{className:"navigator-btn",activeClassName:"selected-btn",exact:!0,onClick:n,to:a,children:[t&&Object(c.jsx)(k.a,{icon:t})," ",o]})}),M=(n(65),function(e){var t=e.name,n=e.role;return Object(c.jsxs)("div",{className:"user-info",children:[Object(c.jsx)("strong",{children:t}),Object(c.jsx)("span",{children:n})]})}),U=(n(66),function(e){var t=e.children,n=e.user,a=Object(o.useState)(!1),i=Object(I.a)(a,2),s=i[0],l=i[1],d=Object(r.c)();return(null===n||void 0===n?void 0:n.name)?Object(c.jsxs)("div",{className:"navigator",children:[Object(c.jsxs)("div",{className:"navigator-topbar",children:[Object(c.jsxs)(P,{className:"expand-btn",onClick:function(){return l(!s)},type:"button",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]}),Object(c.jsx)("h1",{children:"dashboard"}),Object(c.jsx)(M,{name:null===n||void 0===n?void 0:n.name,role:null===n||void 0===n?void 0:n.role})]}),Object(c.jsxs)("div",{className:"navigator-content",children:[Object(c.jsxs)("div",{className:"navigator-sidebar".concat(s?" expanded shadow":""),children:[Object(c.jsx)(K,{icon:j.a,title:"Settings",onClick:function(){return l(!1)},to:S}),Object(c.jsx)(K,{icon:j.f,title:"Dashboard",onClick:function(){return l(!1)},to:y}),Object(c.jsx)(K,{icon:j.d,title:"Logout",onClick:function(){d({type:h}),l(!1)},to:N})]}),Object(c.jsx)("div",{className:"navigator-children",children:t})]})]}):Object(c.jsx)(c.Fragment,{children:t})}),Z=function(e){var t=e.user,n=function(){return!!(null===t||void 0===t?void 0:t.name)};return Object(c.jsx)("main",{children:Object(c.jsx)(U,{user:t,children:Object(c.jsxs)(w.d,{children:[Object(c.jsx)(w.b,{exact:!0,path:y,render:function(){return n()?Object(c.jsx)(w.b,{component:L}):Object(c.jsx)(w.a,{to:N})}}),Object(c.jsx)(w.b,{exact:!0,path:S,render:function(){return n()?Object(c.jsx)(w.b,{component:H}):Object(c.jsx)(w.a,{to:N})}}),Object(c.jsx)(w.b,{path:N,render:function(){return n()?Object(c.jsx)(w.a,{to:S}):Object(c.jsx)(w.b,{component:B})}})]})})})},X=Object(w.g)(Object(r.b)((function(e){return{user:e.user.user}}),(function(e){return Object(O.a)({},Object(v.b)({},e))}))(Z));u.b.add(j.g);var Y=function(){return Object(c.jsxs)(r.a,{store:x,children:[Object(c.jsx)(d.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnHover:!0,className:"custom-toast"}),Object(c.jsx)(l.a,{children:Object(c.jsx)(X,{})})]})};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Y,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.fa0d2016.chunk.js.map